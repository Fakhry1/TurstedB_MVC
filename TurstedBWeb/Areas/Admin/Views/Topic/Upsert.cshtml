 <!-- Start Stepper HTML -->
@model TopicVM
 <div class="container mt-5">
    <div class="row">
        <form  enctype="multipart/form-data" method="post">
        <div class="accordion" id="accordionExample">
            <div class="steps">
                <progress id="progress" value=0 max=100></progress>
                <div class="step-item">
                    <button id="your-id" class="step-button text-center" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        1
                    </button>
                    <div class="step-title">
                        قيد اعداد
                    </div>
                </div>
                <div class="step-item">
                    <button id="your-id" type="button" class="step-button text-center collapsed" data-bs-toggle="collapse"
                            data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        2
                    </button>
                    <div class="step-title">
                        اعتماد
                    </div>
                </div>
                <div class="step-item">
                    <button id="your-id" type="button" class="step-button text-center collapsed" data-bs-toggle="collapse"
                            data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        3
                    </button>
                    <div class="step-title">
                        تصحيح لغوي
                    </div>
                </div>

                <div class="step-item">
                    <button id="your-id" type="button" class="step-button text-center collapsed" data-bs-toggle="collapse"
                            data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        4
                    </button>
                    <div class="step-title">
                        اعتماد تصميم
                    </div>
                </div>

                <div class="step-item">
                    <button id="your-id" type="button" class="step-button text-center collapsed" data-bs-toggle="collapse"
                            data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                        5
                    </button>
                    <div class="step-title">
                        نشر
                    </div>
                </div>
            </div>


        </div>

    </form>
</div>
</div>
<!-- End Start Stepper HTML -->

<div class="card shadow border-0 ">
    <div class="card-header bg-secondary bg-gradient ml-0 py-3">
        <div class="row">
            <div class="col-12 text-center">
                <h2 class="text-white py-2"> @(Model.topic.TopicId != Guid.Empty  ? @_localization.Getkey("Update") : @_localization.Getkey("Create")) @_localization.Getkey("Topic")</h2>
            </div>
        </div>
    </div>
    <div class="card-body ">
        <form method="post" class="row" enctype="multipart/form-data">
            <input asp-for="topic.TopicId" hidden />

            <div class="row">
                <div class="col-12">
                    <div class="border p-3">

                        <div class="row">
                        <div class="form-floating py-2 col-4">
                                <input asp-for="topic.Titel" class="form-control border-0 shadow" />
                                <label asp-for="topic.Titel" class="ms-2"></label>
                                <span asp-validation-for="topic.Titel" class="text-danger"></span>
                        </div>

                        <div class="form-floating py-2 col-4">

                                <select asp-for="topic.TopicClassification" asp-items=@(new List<SelectListItem> { new SelectListItem {Text="توجيه",Value="توجيه" }
                                    ,new SelectListItem {Text="درس فيديو",Value="درس فيديو" } ,new SelectListItem {Text="درس صوت",Value="درس صوت" }
                                    ,new SelectListItem {Text="اعلان",Value="اعلان" } ,new SelectListItem {Text="صور",Value="صور" }} ) class="form-select">
                                <option disabled selected></option>
                            </select>
                                <label asp-for="topic.TopicClassification" class="ms-2"></label>
                        </div>
                            <div class="form-floating py-2 col-4">

                                <select asp-for="topic.State" asp-items=@(new List<SelectListItem> { new SelectListItem {Text="قيد اعداد",Value="قيد اعداد" }
                                        ,new SelectListItem {Text="اعتماد",Value="اعتماد" } ,new SelectListItem {Text="تصحيح لغوي",Value="تصحيح لغوي" }
                                        ,new SelectListItem {Text="اعتماد تصميم",Value="اعتماد تصميم" } ,new SelectListItem {Text="نشر",Value="نشر" }} ) class="form-select">
                                    <option disabled selected></option>
                                </select>
                                <label asp-for="topic.State" class="ms-2"></label>
                            </div>

                       
                        </div>
                        <div class="row">
                        <div class="form-floating py-2 col-12">
                                <label asp-for="topic.TopicDiscription" class="ms-2 text-muted mb-1"></label>
                                <textarea asp-for="topic.TopicDiscription" class="form-control"></textarea>
                        </div>
                        </div>

                        <div class="row">
                        
                        <div class="form-floating py-2 col-4">
                                <input asp-for="topic.FileSize" class="form-control border-0 shadow" />
                                <label asp-for="topic.FileSize" class="ms-2"></label>
                       
                        </div>

                        <div class="form-floating py-2 col-4">

                                <select asp-for="topic.Active" asp-items=@(new List<SelectListItem> { new SelectListItem {Text="نعم",Value="نعم" }
                                   ,new SelectListItem {Text="لا",Value="لا" }} ) class="form-select">
                                <option disabled selected></option>
                            </select>
                                <label asp-for="topic.Active" class="ms-2"></label>
                        </div>
                            <div class="form-floating py-2 col-4">
                                <input type="date" asp-for="topic.CreationDate" class="form-control" />
                                <label asp-for="topic.CreationDate" class="ms-2"></label>
                                @* <span asp-validation-for="Brother.BirthDate" class="text-danger"></span>*@
                            </div>
                        </div>

                    </div>
                </div>

            </div>

            <div class="container row" style="margin-top: 10px;">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#msg">@_localization.Getkey("PDF Document")</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#pro">@_localization.Getkey("Image")</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#set">@_localization.Getkey("Video")</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#tarq">@_localization.Getkey("Audio")</a>
                    </li>

                </ul>


                <!-- Tab panes -->
                <div class="tab-content">
            <div class="tab-pane container active" id="msg">
                <div class="row pt-3">
                   
                        <h4>الوثيقة</h4>
                        <div class="form-control col-12">
                                <label asp-for="topic.TopicFile" style="cursor: pointer; float:left" id="output" src="@Model.topic.TopicFile">
                                @*  <file id="output" src="@Model.TopicFile" style="width:300px;" />*@
                                @* <a class="btn btn-outline-dark">
                                <i class="bi bi-pen"></i>
                                </a>*@
                            </label>
                                <input asp-for="topic.TopicFile" type="file" onchange="loadFile(event)">
                        </div>
                    
                </div>
            </div>

            <div class="tab-pane container fade" id="pro">
                <div class="row pt-3">
                   
                        <h4>الصور</h4>
                        <div class="form-control col-12">
                                <label asp-for="topic.TopicFile" style="cursor: pointer; float:left" id="output" src="@Model.topic.TopicFile">
                                @*  <file id="output" src="@Model.TopicFile" style="width:300px;" />*@
                                @* <a class="btn btn-outline-dark">
                                <i class="bi bi-pen"></i>
                                </a>*@
                            </label>
                                <input asp-for="topic.TopicFile" type="file" onchange="loadFile(event)">
                        </div>
                   
                </div>
            </div>

                    <div class="tab-pane container fade" id="set">
                <div class="row pt-3">
                    
                        <h4>الفيديو</h4>
                        <div class="form-control col-12">
                                <label asp-for="topic.TopicFile" style="cursor: pointer; float:left" id="output" src="@Model.topic.TopicFile">
                                @*  <file id="output" src="@Model.TopicFile" style="width:300px;" />*@
                                @* <a class="btn btn-outline-dark">
                                <i class="bi bi-pen"></i>
                                </a>*@
                            </label>
                                <input asp-for="topic.TopicFile" type="file" onchange="loadFile(event)">
                        </div>
                    
                </div>
            </div>

               <div class="tab-pane container fade" id="tarq">
                <div class="row pt-3">
                    
                        <h4>الصوت</h4>
                            <div class="form-floating py-2 col-6">
                               @* <label asp-for="topic.TopicFile" style="cursor: pointer; float:left" id="output" src="@Model.topic.TopicFile"></label>*@
                                <input asp-for="topic.TopicFile" type="file" name="file1" id="file1" onchange="uploadFile()"><br>
                        </div>

                            <div class="form-floating py-2 col-6">
                                <progress class="bg-primary" id="progressBar" value="0" max="100" style="width:300px;"></progress>
                                <h4 id="status"></h4>
                                <p id="loaded_n_total"></p>
                         </div>

                   
                </div>
            </div>
            </div>

                </>

                <!-- Tabs content -->
            </div>
            <div class="row pt-2">
                <div class="col-6 col-md-3">
                    @if (Model.topic.TopicId != Guid.Empty)
                    {
                        <button type="submit" class="btn btn-primary form-control">@_localization.Getkey("Update")</button>
                    }
                    else
                    {
                        <button type="submit" class="btn btn-primary form-control">@_localization.Getkey("Create")</button>
                    }
                </div>
                <div class="col-6 col-md-3">
                    <a asp-controller="Topic" asp-action="Index" class="btn btn-outline-primary border  form-control">
                        @_localization.Getkey("Back to List")
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts{
    <script>
        tinymce.init({
            selector: 'textarea',
            plugins: 'anchor autolink charmap codesample emoticons  lists   table visualblocks wordcount',
            toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough |  align lineheight | numlist bullist indent outdent',
        });
    </script>
@*
    <script>
        var loadFile = function (event) {
            var image = document.getElementById('output');
            image.src = URL.createObjectURL(event.target.files[0]);
        };
    </script>*@

    @*____________________________________*@

    <script>
        function _(el) {
            return document.getElementById(el);
        }

        function uploadFile() {
            var file = _("file1").files[0];
            // alert(file.name+" | "+file.size+" | "+file.type);
            var formdata = new FormData();
            formdata.append("file1", file);
            var ajax = new XMLHttpRequest();
            ajax.upload.addEventListener("progress", progressHandler, false);
            //ajax.addEventListener("load", completeHandler, false);
            ajax.addEventListener("error", errorHandler, false);
            ajax.addEventListener("abort", abortHandler, false);
            ajax.open("POST", "file_upload_parser.php"); // http://www.developphp.com/video/JavaScript/File-Upload-Progress-Bar-Meter-Tutorial-Ajax-PHP
            //use file_upload_parser.php from above url
            ajax.send(formdata);
        }

        function progressHandler(event) {
            _("loaded_n_total").innerHTML = "Uploaded " + event.loaded + " bytes of " + event.total;
            var percent = (event.loaded / event.total) * 100;
            _("progressBar").value = Math.round(percent);
            //_("status").innerHTML = Math.round(percent) + "% uploaded... please wait";
        }

        function completeHandler(event) {
            _("status").innerHTML = event.target.responseText;
            //_("progressBar").value = 0; //wil clear progress bar after successful upload
        }

        function errorHandler(event) {
            _("status").innerHTML = "Upload Failed";
        }

        function abortHandler(event) {
            _("status").innerHTML = "Upload Aborted";
        }
    </script>

    @*_____________________________________*@


    @{
        <partial name="_ValidationScriptsPartial" />
    }
}